{"ast":null,"code":"var _jsxFileName = \"/Users/cris/Code/pokemon-league/src/components/EditProfile/EditProfile.tsx\",\n    _s = $RefreshSig$();\n\nimport { Button, Grid, makeStyles, Modal, Paper, TextField, Typography } from '@material-ui/core';\nimport { useContext, useEffect, useState } from 'react';\nimport AuthUserContext from '../../context/AuthUserContext';\nimport { ApiManager } from '../../helpers/ApiManager';\nimport CloseButton from '../UI/CloseButton/CloseButton';\nimport SnackbarContext from '../../context/SnackbarContext';\nimport { useSelector } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initUserData = {\n  username: '',\n  first_name: '',\n  middle_name: '',\n  last_name: '',\n  email: '',\n  gender: '',\n  password: '',\n  confirm_password: ''\n};\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    padding: theme.spacing(3),\n    width: '50%',\n    maxWidth: '50%'\n  }\n}));\n\nconst EditProfile = ({\n  close,\n  doUpdateProfile\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const user = useSelector(state => state.userProfile.user);\n  const {\n    authUser\n  } = useContext(AuthUserContext);\n  const {\n    setSnackbar\n  } = useContext(SnackbarContext); // state\n\n  const [userData, setUserData] = useState(initUserData);\n  const [errors, setErrors] = useState(initUserData); // hooks\n\n  useEffect(() => {\n    const fillInUserData = { ...userData,\n      ...user\n    };\n    setUserData(fillInUserData);\n  }, [user]); // functions\n\n  const onChangeHandler = e => {\n    setUserData({ ...userData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const isSubmitDisabled = () => {\n    switch (true) {\n      case user.username !== userData.username:\n        return false;\n\n      case user.email !== userData.email:\n        return false;\n\n      case user.first_name !== userData.first_name:\n        return false;\n\n      case user.middle_name !== userData.middle_name:\n        return false;\n\n      case user.last_name !== userData.last_name:\n        return false;\n\n      case userData.password !== \"\" && !passwordsDoNotMatch:\n        return false;\n\n      default:\n        return true;\n    }\n  };\n\n  const passwordsDoNotMatch = userData.confirm_password !== userData.password;\n\n  const onSubmitHandler = async e => {\n    e.preventDefault();\n\n    try {\n      const response = await ApiManager.updateProfile(authUser, userData);\n      setSnackbar({\n        message: response.data.message\n      });\n      doUpdateProfile(response.data);\n    } catch (error) {\n      console.error(error);\n\n      if (error.response.data.errors) {\n        setErrors({ ...errors,\n          ...error.response.data.errors\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    open: true,\n    onClose: close,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmitHandler,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        component: Paper,\n        spacing: 3,\n        className: classes.root,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h3\",\n            children: \"Edit Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            autoFocus: true,\n            variant: \"outlined\",\n            type: \"text\",\n            placeholder: \"Username\",\n            value: userData.username,\n            fullWidth: true,\n            name: \"username\",\n            onChange: onChangeHandler,\n            error: errors.username !== \"\",\n            helperText: errors.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            type: \"email\",\n            placeholder: \"Email\",\n            value: userData.email,\n            fullWidth: true,\n            name: \"email\",\n            onChange: onChangeHandler,\n            error: errors.email !== \"\",\n            helperText: errors.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            type: \"text\",\n            placeholder: \"First Name\",\n            value: userData.first_name,\n            fullWidth: true,\n            name: \"first_name\",\n            onChange: onChangeHandler,\n            error: errors.first_name !== \"\",\n            helperText: errors.first_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            type: \"text\",\n            placeholder: \"Middle Name\",\n            value: userData.middle_name,\n            fullWidth: true,\n            name: \"middle_name\",\n            onChange: onChangeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            type: \"text\",\n            placeholder: \"Last Name\",\n            value: userData.last_name,\n            fullWidth: true,\n            name: \"last_name\",\n            onChange: onChangeHandler,\n            error: errors.last_name !== \"\",\n            helperText: errors.last_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            type: \"password\",\n            placeholder: \"Password\",\n            value: userData.password,\n            fullWidth: true,\n            name: \"password\",\n            onChange: onChangeHandler,\n            error: errors.password !== \"\",\n            helperText: errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            type: \"password\",\n            placeholder: \"Confirm Password\",\n            value: userData.confirm_password,\n            fullWidth: true,\n            name: \"confirm_password\",\n            onChange: onChangeHandler,\n            error: errors.confirm_password !== \"\" || passwordsDoNotMatch,\n            helperText: errors.confirm_password ? errors.confirm_password : passwordsDoNotMatch ? 'Passwords do not match' : null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            color: \"primary\",\n            fullWidth: true,\n            variant: \"contained\",\n            onClick: onSubmitHandler,\n            disabled: isSubmitDisabled(),\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CloseButton, {\n          onClose: close\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EditProfile, \"0tywkmZa6obV6vJAtBP7nNd9Nbo=\", false, function () {\n  return [useStyles, useSelector];\n});\n\n_c = EditProfile;\nexport default EditProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditProfile\");","map":{"version":3,"sources":["/Users/cris/Code/pokemon-league/src/components/EditProfile/EditProfile.tsx"],"names":["Button","Grid","makeStyles","Modal","Paper","TextField","Typography","useContext","useEffect","useState","AuthUserContext","ApiManager","CloseButton","SnackbarContext","useSelector","initUserData","username","first_name","middle_name","last_name","email","gender","password","confirm_password","useStyles","theme","root","position","top","left","transform","padding","spacing","width","maxWidth","EditProfile","close","doUpdateProfile","classes","user","state","userProfile","authUser","setSnackbar","userData","setUserData","errors","setErrors","fillInUserData","onChangeHandler","e","target","name","value","isSubmitDisabled","passwordsDoNotMatch","onSubmitHandler","preventDefault","response","updateProfile","message","data","error","console"],"mappings":"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","sourcesContent":["import { Button, Grid, makeStyles, Modal, Paper, TextField, Theme, Typography } from '@material-ui/core'\nimport { ChangeEvent, useContext, useEffect, useState } from 'react';\nimport AuthUserContext from '../../context/AuthUserContext';\nimport { ApiManager } from '../../helpers/ApiManager';\nimport { USER } from '../../types';\nimport CloseButton from '../UI/CloseButton/CloseButton';\nimport {AUTHUSERCONTEXT} from '../../types/index';\nimport SnackbarContext from '../../context/SnackbarContext';\nimport { useSelector } from 'react-redux';\n\ninterface PROPS {\n  doUpdateProfile: (user: USER) => void,\n  close: () => void\n}\n\nconst initUserData: Partial<USER> = {\n  username: '',\n  first_name: '',\n  middle_name: '',\n  last_name: '',\n  email: '',\n  gender: '',\n  password: '',\n  confirm_password: ''\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    padding: theme.spacing(3),\n    width: '50%',\n    maxWidth: '50%'\n  }\n}));\n\nconst EditProfile = ({ close, doUpdateProfile }: PROPS) => {\n  const classes = useStyles();\n\n  const user = useSelector((state: any) => state.userProfile.user);\n  const { authUser } = useContext(AuthUserContext) as AUTHUSERCONTEXT;\n  const { setSnackbar } = useContext(SnackbarContext);\n\n  // state\n  const [userData, setUserData] = useState<Partial<USER>>(initUserData);\n  const [errors, setErrors] = useState<Partial<USER>>(initUserData);\n\n  // hooks\n  useEffect(() => {\n    const fillInUserData = {\n      ...userData,\n      ...user\n    }\n    setUserData(fillInUserData);\n  },[user]);\n\n  // functions\n  const onChangeHandler = (e: ChangeEvent<HTMLInputElement>): void => {\n    setUserData({\n      ...userData,\n      [e.target.name]: e.target.value\n    })\n  }\n\n  const isSubmitDisabled = () => {\n    switch (true) {\n      case user.username !== userData.username:\n        return false;\n      case user.email !== userData.email:\n        return false;\n      case user.first_name !== userData.first_name:\n        return false;\n      case user.middle_name !== userData.middle_name:\n        return false;\n      case user.last_name !== userData.last_name:\n        return false;\n      case userData.password !== \"\" && !passwordsDoNotMatch:\n        return false;\n      default:\n        return true;\n    }\n  }\n\n  const passwordsDoNotMatch = userData.confirm_password !== userData.password;\n\n  const onSubmitHandler = async (e: any) => {\n    e.preventDefault();\n    try {\n      const response = await ApiManager.updateProfile(authUser, userData);\n      setSnackbar({message: response.data.message})\n      doUpdateProfile(response.data);\n    } catch(error: any) {\n      console.error(error);\n      if(error.response.data.errors) {\n        setErrors({...errors, ...error.response.data.errors});\n      }\n    }\n  }\n  return (\n    <Modal\n      open\n      onClose={close}\n    >\n      <form onSubmit={onSubmitHandler}>\n        <Grid container component={Paper} spacing={3} className={classes.root}>\n          <Grid item xs={12}>\n            <Typography variant={\"h3\"}>Edit Profile</Typography>\n          </Grid>\n          <Grid item xs={6}>\n            <TextField\n              autoFocus\n              variant={\"outlined\"} \n              type=\"text\" \n              placeholder=\"Username\"\n              value={userData.username}\n              fullWidth\n              name=\"username\"\n              onChange={onChangeHandler} \n              error={errors.username !== \"\"}\n              helperText={errors.username}\n            />\n          </Grid>\n          <Grid item xs={6}>\n            <TextField\n              variant={\"outlined\"} \n              type=\"email\" \n              placeholder=\"Email\" \n              value={userData.email}\n              fullWidth \n              name=\"email\"\n              onChange={onChangeHandler}\n              error={errors.email !== \"\"}\n              helperText={errors.email}\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <TextField\n              variant={\"outlined\"} \n              type=\"text\" \n              placeholder=\"First Name\" \n              value={userData.first_name}\n              fullWidth \n              name=\"first_name\"\n              onChange={onChangeHandler}\n              error={errors.first_name !== \"\"}\n              helperText={errors.first_name}\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <TextField\n              variant={\"outlined\"} \n              type=\"text\" \n              placeholder=\"Middle Name\"\n              value={userData.middle_name}\n              fullWidth \n              name=\"middle_name\"\n              onChange={onChangeHandler}\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <TextField\n              variant={\"outlined\"} \n              type=\"text\" \n              placeholder=\"Last Name\" \n              value={userData.last_name}\n              fullWidth\n              name=\"last_name\"\n              onChange={onChangeHandler} \n              error={errors.last_name !== \"\"}\n              helperText={errors.last_name}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField\n              variant={\"outlined\"} \n              type=\"password\"  \n              placeholder=\"Password\" \n              value={userData.password}\n              fullWidth \n              name=\"password\"\n              onChange={onChangeHandler}\n              error={errors.password !== \"\"}\n              helperText={errors.password}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField \n              variant={\"outlined\"}\n              type=\"password\"  \n              placeholder=\"Confirm Password\" \n              value={userData.confirm_password}\n              fullWidth \n              name=\"confirm_password\"\n              onChange={onChangeHandler}\n              error={errors.confirm_password !== \"\" || passwordsDoNotMatch}\n              helperText={errors.confirm_password ? errors.confirm_password : passwordsDoNotMatch ? 'Passwords do not match' : null}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <Button \n              type={\"submit\"}\n              color={\"primary\"} \n              fullWidth \n              variant={\"contained\"} \n              onClick={onSubmitHandler}\n              disabled={isSubmitDisabled()}\n            >\n              Update\n            </Button>\n          </Grid>\n          <CloseButton onClose={close} />\n        </Grid>\n      </form>\n    </Modal>\n  )\n}\n\nexport default EditProfile;\n"]},"metadata":{},"sourceType":"module"}